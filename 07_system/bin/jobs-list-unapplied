#!/usr/bin/env python3
import json, pathlib

def cut(s, n): 
    return s if len(s) <= n else s[:n-1] + "â€¦"

root = pathlib.Path.home() / "secondbrain/01_projects/jobs"

print(f"{'COMPANY':20}  {'ROLE':35}  {'FOUND':10}  {'URL'}")
print("-" * 100)

for jm in root.rglob("tracking/job-meta.json"):
    try:
        d = json.loads(jm.read_text())
    except Exception:
        continue
    if d.get("status") == "not_applied":
        print(
            f"{d.get('company',''):20}  "
            f"{cut(d.get('role_title',''),35):35}  "
            f"{d.get('date_found',''):10}  "
            f"{cut(d.get('source',''),60)}"
        )

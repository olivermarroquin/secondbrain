#!/usr/bin/env bash
set -euo pipefail

usage() {
  cat <<'EOF'
Usage:
  resume load-job --app <APP> [--write-debug] [--root <ROOT>]
  resume select-template --app <APP> [--write] [--root <ROOT>]
  resume emphasis-tags --app <APP> [--write] [--root <ROOT>]
  resume propose-changes --app <APP> [--force] [--root <ROOT>]
EOF
}

die() { echo "ERROR: $*" >&2; exit 2; }

if [[ $# -lt 1 ]]; then usage; exit 2; fi

cmd="$1"; shift

ROOT="${HOME}/secondbrain"
RF_SCRIPTS="${ROOT}/01_projects/resume-factory/scripts"

case "$cmd" in
  load-job)         exec "${RF_SCRIPTS}/rf_load_job.py" "$@";;
  select-template)  exec "${RF_SCRIPTS}/rf_select_template.py" "$@";;
  emphasis-tags)    exec "${RF_SCRIPTS}/rf_emphasis_tags.py" "$@";;
  propose-changes)  exec "${RF_SCRIPTS}/rf_propose_changes.py" "$@";;
  -h|--help|help)   usage;;
  *) die "Unknown command: $cmd";;
esac
